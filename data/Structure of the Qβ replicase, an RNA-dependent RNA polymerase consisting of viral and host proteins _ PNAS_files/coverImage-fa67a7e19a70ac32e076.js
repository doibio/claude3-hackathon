(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{744:function(e,t,o){"use strict";o.r(t);var r=o(4),i=o.n(r),n=o(5),s=o.n(n),p=o(10),l=o.n(p),c=o(8),a=o.n(c),v=o(2),u=o.n(v),h=o(11),m=o.n(h),d=o(9),g=o(17);function _callSuper(e,t,o){return t=u()(t),l()(e,function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function _isNativeReflectConstruct(){return!!e}()}()?Reflect.construct(t,o||[],u()(e).constructor):t.apply(e,o))}var _,y=function(e){function CoverImage(e){var t,o;return i()(this,CoverImage),(o=_callSuper(this,CoverImage)).isPopupOpened=!1,o.wrapper=e,o.isViewable=null===(t=o.wrapper.querySelector(o._selectors.coverImageWrapper))||void 0===t?void 0:t.dataset.isViewable,o.isViewable&&o.initializePopup(),o}return m()(CoverImage,e),s()(CoverImage,[{key:"selectors",get:function get(){return{btnViewCover:".cover-image__view-cover",coverImageWrapper:".cover-image__image",coverImage:".cover-image__image img",popupView:".cover-image__popup-view",popupCover:".cover-image__popup-view__cover img",movingCover:".cover-image__popup-moving-cover",hoverOverlay:".cover-image__image__hover-overlay",closePopup:".cover-image__popup-view__close-popup button",coverImageCaptionWrapper:".cover-image__popup-view__caption-wrapper"}}},{key:"elements",get:function get(){return{btnViewCover:null,popupView:null,popupCover:null,movingCover:null,coverImageWrapper:null,coverImage:null,hoverOverlay:null,closePopup:null,coverImageCaptionWrapper:null}}},{key:"classList",get:function get(){return{visible:"visible"}}},{key:"initializePopup",value:function initializePopup(){var e;(a()(u()(CoverImage.prototype),"initialize",this).call(this),this._elements={btnViewCover:this.wrapper.querySelector(this._selectors.btnViewCover),popupView:this.wrapper.querySelector(this._selectors.popupView),popupCover:this.wrapper.querySelector(this._selectors.popupCover),movingCover:this.wrapper.querySelector(this._selectors.movingCover),coverImageWrapper:this.wrapper.querySelector(this._selectors.coverImageWrapper),coverImage:this.wrapper.querySelector(this._selectors.coverImage),hoverOverlay:this.wrapper.querySelector(this._selectors.hoverOverlay),closePopup:this.wrapper.querySelector(this._selectors.closePopup),coverImageCaptionWrapper:this.wrapper.querySelector(this._selectors.coverImageCaptionWrapper)},this._elements.movingCover)&&(this.coverSrc=null===(e=this._elements.movingCover.dataset)||void 0===e?void 0:e.coverSrc,this._elements.movingCover.style.backgroundImage="url('".concat(this.coverSrc,"')"));this.addEventListeners()}},{key:"addEventListeners",value:function addEventListeners(){var e,t,o,r,i,n;(a()(u()(CoverImage.prototype),"addEventListeners",this).call(this),this._elements.hoverOverlay)?(null===(r=this._elements.coverImageWrapper)||void 0===r||r.addEventListener("click",this.showPopup.bind(this)),null===(i=this._elements.coverImageWrapper)||void 0===i||i.addEventListener("keydown",this.handleHoverOverlayKeydown.bind(this))):null===(n=this._elements.btnViewCover)||void 0===n||n.addEventListener("click",this.showPopup.bind(this));null===(e=this._elements.popupView)||void 0===e||e.addEventListener("click",this.closePopup.bind(this)),null===(t=this._elements.closePopup)||void 0===t||t.addEventListener("click",this.closePopup.bind(this)),null===(o=this._elements.coverImageCaptionWrapper)||void 0===o||o.addEventListener("click",(function(e){return e.stopPropagation()})),document.addEventListener("keydown",this.handlePopupKeydown.bind(this))}},{key:"showPopup",value:function showPopup(e){e.preventDefault(),this.isPopupOpened||(this.isPopupOpened=!0,document.body.style.overflow="hidden",this.animateCover({from:this._elements.coverImage,to:this._elements.popupCover}),this._elements.popupView.classList.add(this._classList.visible))}},{key:"closePopup",value:function closePopup(e){e.preventDefault(),e.stopImmediatePropagation(),this.isPopupOpened=!1,document.body.style.overflow="visible",this.animateCover({from:this._elements.popupCover,to:this._elements.coverImage}),this._elements.popupView.classList.remove(this._classList.visible)}},{key:"animateCover",value:function animateCover(e){var t=this,o=e.from.getBoundingClientRect(),r=e.to.getBoundingClientRect();this._elements.movingCover.style.width=o.width+"px",this._elements.movingCover.style.height=o.height+"px",this._elements.movingCover.style.top=o.top+"px",this._elements.movingCover.style.left=o.left+"px";var i=r.left-o.left,n=r.top-o.top;this._elements.movingCover.style.transform="translate3d(".concat(i,"px, ").concat(n,"px, 0) scale(").concat(r.width/o.width,")"),setTimeout((function(){t._elements.movingCover.style.opacity="0",setTimeout((function(){t._elements.movingCover.style.opacity="1",t._elements.movingCover.style.transform="unset",t._elements.movingCover.style.width="0px",t._elements.movingCover.style.height="0px",t._elements.movingCover.style.top="0px",t._elements.movingCover.style.left="0px"}),200)}),450)}},{key:"handlePopupKeydown",value:function handlePopupKeydown(e){e.keyCode===g.c.ESC&&this.isPopupOpened&&this.closePopup(e)}},{key:"handleHoverOverlayKeydown",value:function handleHoverOverlayKeydown(e){e.keyCode===g.c.RETURN&&this.showPopup(e)}}]),CoverImage}(d.a),w=(_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},C=function(e){function CoverImage(){return null!==e&&e.apply(this,arguments)||this}return w(CoverImage,e),Object.defineProperty(CoverImage.prototype,"childSelectors",{get:function(){return __assign(__assign({},this._selectors),{tocViewCoverList:".cover-image__toc-view-cover",linkCoverImg:".cover-image__popup-view__caption-wrapper a",coverPopup:".cover-image__popup-view"})},enumerable:!1,configurable:!0}),CoverImage.prototype.initializePopup=function(){var t;e.prototype.initialize.call(this),this.tocViewCoverList=document.querySelectorAll(this.childSelectors.tocViewCoverList),this._elements={btnViewCover:this.wrapper.querySelector(this.childSelectors.btnViewCover),popupView:this.wrapper.querySelector(this.childSelectors.popupView),popupCover:this.wrapper.querySelector(this.childSelectors.popupCover),movingCover:this.wrapper.querySelector(this.childSelectors.movingCover),coverImageWrapper:this.wrapper.querySelector(this.childSelectors.coverImageWrapper),coverImage:this.wrapper.querySelector(this.childSelectors.coverImage),hoverOverlay:this.wrapper.querySelector(this.childSelectors.hoverOverlay),closePopup:this.wrapper.querySelector(this.childSelectors.closePopup),captionLink:this.wrapper.querySelector(this.childSelectors.linkCoverImg),coverPopupWrapper:this.wrapper.querySelector(this.childSelectors.coverPopup)},this._elements.movingCover&&(this.coverSrc=null===(t=this._elements.movingCover.dataset)||void 0===t?void 0:t.coverSrc,this._elements.movingCover.style.backgroundImage="url('"+this.coverSrc+"')"),this._elements.captionLink&&this._elements.captionLink.addEventListener("click",this.redirectCaptionLink),this.addEventListeners()},CoverImage.prototype.addEventListeners=function(){var t=this;e.prototype.addEventListeners.call(this),this.tocViewCoverList.forEach((function(o){o.addEventListener("click",e.prototype.showPopup.bind(t)),o.style.cursor="pointer"}))},CoverImage.prototype.redirectCaptionLink=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget;window.location.href=t.getAttribute("href")},CoverImage}(y);t.default=C}}]);
//# sourceMappingURL=coverImage-fa67a7e19a70ac32e076.js.map